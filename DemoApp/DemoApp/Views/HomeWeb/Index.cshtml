@model DemoApp.Controllers.UserInfo
@{
    Layout = "../Shared/Layout.cshtml";
}

<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12">
            <div class="well pull-right">
                <p><strong>User information:</strong></p>
                <p>@(Model.Username ?? "unknown") - @Model.IpAddress</p>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-lg-4 col-md-6 col-sm-12">
            <strong>Tiles</strong>
            <div id="tile-container"></div>
        </div>
        <div class="col-lg-4 col-md-6 col-sm-12">
            <strong>Messages</strong>
            <ul id="message-container"></ul>
        </div>
        <div class="col-lg-4 col-md-6 col-sm-12">
            <strong>Dots</strong>
            <div id="dot-container"></div>
        </div>
    </div>
    <script src="~/Scripts/jquery-1.9.1.js" ></script>
    <script src="~/Scripts/bootstrap.js" ></script>
    <script src="~/Scripts/jquery.signalR-2.2.0.js"></script>
    <script src="signalr/hubs"></script>
    <script>
        var tile = $.connection.tileHub;
        tile.client.broadcastMessage = function (name, message) {
            var newTile = $('<div />')
                            .addClass('label')
                            .attr('style', 'background-color:' + message)
                            .html('&nbsp;');

            $('#tile-container').append(newTile);
        };

        var dot = $.connection.dotHub;
        dot.client.broadcastMessage = function (name, message) {
            $('#dot-container').append(".");
        };
        var messages = $.connection.messagesHub;
        messages.client.broadcastMessage = function (name, message) {
            var msgItem = $('<li />')
                            .html(name + ' - ' + message);
            $('#message-container').append(msgItem);
        };

        // Start the connection.
        $.connection.hub.start().done(function () {
            //nothing yet
        });


    </script>
</div>